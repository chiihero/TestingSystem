@{
    ViewData["Title"] = "Admin";
}
<h2>
    欢迎用户：@ViewData["Userno"]
</h2>

<h3>测试试卷：@ViewBag.Papers.Tables[0].Rows[0][1]</h3>
<div class="table-responsive">
    <table class="table table-hover">
        <thead>
            <tr>
                <th>题目</th>
                <th>题目名称</th>
                <th>@ViewBag.Papers.Tables[0].Rows[0][3]</th>
                <th>@ViewBag.Papers.Tables[0].Rows[0][5]</th>
                <th>@ViewBag.Papers.Tables[0].Rows[0][7]</th>
                <th>@ViewBag.Papers.Tables[0].Rows[0][9]</th>
            </tr>
        </thead>
        <tbody>
            @{ int i = 0; }
            @foreach (var Row in ViewBag.Paperitem.Tables[0].Rows)
            {
                i++;
                <tr>
                    <th>@i</th>
                    <th>@Row[1]</th>
                    <th>
                        <label class="radio-inline">
                            <input type="radio" name="Radio_@i" value="option1"> 选项 1
                        </label>
                    </th>
                    <th>
                        <label class="radio-inline">
                            <input type="radio" name="Radio_@i" value="option2"> 选项 2
                        </label>
                    </th>
                    <th>
                        <label class="radio-inline">
                            <input type="radio" name="Radio_@i" value="option3"> 选项 3
                        </label>
                    </th>
                    <th>
                        <label class="radio-inline">
                            <input type="radio" name="Radio_@i" value="option4"> 选项 4
                        </label>
                    </th>
                </tr>
            }
        </tbody>
    </table>
</div>
<button id="test" type="button" class="btn btn-primary">提交测试</button>

<script>
    var score1 = @ViewBag.Papers.Tables[0].Rows[0][4];
    var score2 = @ViewBag.Papers.Tables[0].Rows[0][6];
    var score3 = @ViewBag.Papers.Tables[0].Rows[0][8];
    var score4 = @ViewBag.Papers.Tables[0].Rows[0][10];
    var Datas = {
        create: function () {
            userno: "";
            papers: "";
            grade: "";
            return Datas;
        }
    }
    $("#test").click(function () {
        var radio1_num = $("input:checked[value = 'option1']").length
        var radio2_num = $("input:checked[value = 'option2']").length
        var radio3_num = $("input:checked[value = 'option3']").length
        var radio4_num = $("input:checked[value = 'option4']").length
        var score = radio1_num * score1 + radio2_num * score2 + radio3_num * score3 + radio4_num * score4
        var newDatas = Datas.create();
        newDatas.userno = @ViewData["Userno"];
        newDatas.papers = @ViewBag.Papers.Tables[0].Rows[0][0];
        newDatas.grade = score;
        $.ajax({
            url: "/Student/AddGrade",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(newDatas),
            success: function () {
                alert("你的测试分数为：" + score)
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("请求失败，消息：" + textStatus + "  " + errorThrown);
            }
        });
    })

    //function getGrade() {
    //    var radios = document.get("radioname");
    //    var value;
    //    for (var i = 0; i < radios.length; i++) {
    //        if (radios[i].checked) {
    //            value = radios[i].value;
    //            break;
    //        }
    //        return value;
    //    }

</script>
